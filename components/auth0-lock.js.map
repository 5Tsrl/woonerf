{"version":3,"sources":["auth0-lock.js"],"names":["Auth0","props","lockOptions","push","setAuth0User","lock","show","on","authResult","hide","getProfile","idToken","error","profile","user","window","localStorage","setItem","propTypes","object","func","isRequired","mapStateToProps","state","mapDispatchToProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;IAEMA,K;;;;;;;;;;wCAOiB;AAAA,mBACuB,KAAKC,KAD5B;AAAA,UACZC,WADY,UACZA,WADY;AAAA,UACCC,IADD,UACCA,IADD;AAAA,UACOC,YADP,UACOA,YADP;;AAEnB,UAAMC,OAAO,mBAAQH,WAAR,CAAb;AACAG,WAAKC,IAAL;AACAD,WAAKE,EAAL,CAAQ,eAAR,EAAyB,UAACC,UAAD,EAAgB;AACvCH,aAAKI,IAAL;AACAJ,aAAKK,UAAL,CAAgBF,WAAWG,OAA3B,EAAoC,UAACC,KAAD,EAAQC,OAAR,EAAoB;AACtD,cAAID,KAAJ,EAAW;AACTR,yBAAa,IAAb;AACAD,iBAAK,QAAL;AACD,WAHD,MAGO;AACL,gBAAMW,kCACDN,UADC;AAEJK;AAFI,cAAN;AAIAE,mBAAOC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,EAAoC,yBAAeH,IAAf,CAApC;AACAV,yBAAaU,IAAb;AACAX,iBAAK,GAAL;AACD;AACF,SAbD;AAcD,OAhBD;AAiBD;;;6BAES;AACR,aAAO,IAAP;AACD;;;;;AAhCGH,K,CACGkB,S,GAAY;AACjBhB,eAAa,oBAAUiB,MADN;AAEjBhB,QAAM,oBAAUiB,IAAV,CAAeC,UAFJ;AAGjBjB,gBAAc,oBAAUgB,IAAV,CAAeC;AAHZ,C;;;AAkCrB,SAASC,eAAT,CAA0BC,KAA1B,EAAiCtB,KAAjC,EAAwC;AACtC,SAAO;AACLC,iBAAaD,MAAMC,WAAN;AADR,GAAP;AAGD;AACD,IAAMsB,qBAAqB;AACzBrB,8BADyB;AAEzBC;AAFyB,CAA3B;;kBAKe,yBAAQkB,eAAR,EAAyBE,kBAAzB,EAA6CxB,KAA7C,C","file":"auth0-lock.js","sourcesContent":["import PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {push} from 'react-router-redux'\n\nimport {setAuth0User} from '../actions/user'\nimport {defaultLockOptions, getLock} from '../auth0'\nimport Pure from './pure'\n\nclass Auth0 extends Pure {\n  static propTypes = {\n    lockOptions: PropTypes.object,\n    push: PropTypes.func.isRequired,\n    setAuth0User: PropTypes.func.isRequired\n  }\n\n  componentDidMount () {\n    const {lockOptions, push, setAuth0User} = this.props\n    const lock = getLock(lockOptions)\n    lock.show()\n    lock.on('authenticated', (authResult) => {\n      lock.hide()\n      lock.getProfile(authResult.idToken, (error, profile) => {\n        if (error) {\n          setAuth0User(null)\n          push('/login')\n        } else {\n          const user = {\n            ...authResult,\n            profile\n          }\n          window.localStorage.setItem('user', JSON.stringify(user))\n          setAuth0User(user)\n          push('/')\n        }\n      })\n    })\n  }\n\n  render () {\n    return null\n  }\n}\n\nfunction mapStateToProps (state, props) {\n  return {\n    lockOptions: props.lockOptions || defaultLockOptions\n  }\n}\nconst mapDispatchToProps = {\n  push,\n  setAuth0User\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth0)\n"]}